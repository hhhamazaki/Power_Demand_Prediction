# ワークフロー定義: InboxからLiteratureへ

---

## 1. 目的

このドキュメントは、`00_Inbox` フォルダ内のMarkdownファイルを `20_Literature` フォルダへ処理・移動するための自動化ワークフローを定義する。

## 2. 実行トリガー

ユーザーがこのファイル (`InboxをLiteratureに進化.md`) の実行を指示した際に、本ワークフローを開始する。

---

## 3. 基本ワークフロー

`00_Inbox` フォルダ内の全Markdownファイルがなくなるまで、以下の処理をファイルごとに繰り返す。

### Step 1: ファイルの探索と選択

1.  `00_Inbox` フォルダ内にあるすべてのMarkdownファイル（サブフォルダも含む）を探索する。
2.  最も新しく更新されたファイルから順に処理対象として選択する。

### Step 2: コンテンツの分析と昇華

1.  選択したファイルの内容を読み込む。
2.  以下のルールに基づき、コンテンツを分析・要約し、新しいMarkdownファイルを作成する。

    *   **ペルソナ**: プロのコンテンツアナリスト
    *   **タスク**:
        1.  **重要ポイントの要約**: 元の内容から核心となるポイントを3〜5点、箇条書きで抽出する。
        2.  **概要文の生成**: 以下の要件を満たす概要文を箇条書きで作成する。
            - 視聴・閲覧意欲を促進する内容にする。
            - 150〜250文字程度の長さにまとめる。

### Step 3: ファイルの保存

1.  昇華させた新しいファイルを `20_Literature` フォルダ内の適切なサブカテゴリに保存する。
2.  **サブカテゴリの選択基準**:
    *   `21_Books/`: 書籍関連
    *   `22_Articles/`: 記事関連
    *   `23_Videos/`: 動画関連
    *   `24_SNS/`: SNS投稿関連
    *   `29_other/`: その他
3.  **ファイル名**: 元のファイル名から日付と言語を維持し、内容を要約したタイトルを付与する (`YYYY-MM-DD_新しいタイトル.md`)。

### Step 4: 元ファイルの削除

処理が正常に完了した元のMarkdownファイルを `00_Inbox` フォルダから削除する。

---

## 4. 補足事項

### 4.1. 元ファイルの確実な削除方法

-   **課題**: `del`コマンドでは、ファイル名に日本語などのマルチバイト文字や特殊文字が含まれていると、直接のファイル名指定による削除が失敗する場合があります。
-   **対策**: ファイル名に含まれるユニークなタイムスタンプ部分（例: `YYYY-MM-DDTHHMMSS+0900`）とワイルドカード (`*`) を組み合わせたパターンでファイルを特定し、削除します。
    - この方法は本ワークフローで成功が確認されています。
-   **コマンド例**: `del C:\Users\...\00_Inbox\clip\YYYY-MM-DDTHHMMSS+0900_*.md`

### 4.2. その他のエラー

-   **原因**: ファイルが他のプロセスによってロックされている、アクセス権限がない、ファイルが存在しないなど。
-   **対策**:
    1.  エラーメッセージをユーザーに提示し、原因の特定を促す。
    2.  可能であれば、エラーが発生したファイルをスキップし、次のファイルの処理を継続するかをユーザーに確認する。
    3.  ワークフローを安全に停止し、ユーザーに対応を依頼する。