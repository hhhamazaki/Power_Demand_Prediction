# 練習問題機能 要件定義書・基本設計書

## 要件定義書

### 1. プロジェクト概要

#### 1.1 目的

Learning Next プラットフォームに、ユーザーの理解度を確認するための練習問題機能を追加する。

#### 1.2 背景と目標

- ユーザーが学習した内容を自己評価できる仕組みが必要
- 無料ユーザーにも価値を提供しつつ、有料機能を提供することでさらに学習の深度を増す
- Learning Next プラットフォームの教育効果を高める

#### 1.3 対象ユーザー

- Learning Next プラットフォームの無料ユーザー
- 有料コースを受講中のユーザー（トピック別の学習進捗確認用）

### 2. 機能要件

#### 2.1 練習問題データ管理

- 練習問題はコース（Ruby、Rails、RSpec）ごとに分類
- トピック（配列、ハッシュなど）による細分化
- 難易度（初級、中級、上級）による分類
- 問題文はマークダウン形式で作成（コードブロック含む）
- 4 択問題とテキスト入力問題の 2 種類をサポート

#### 2.2 練習問題選択・フィルタリング機能

- コース、トピック、難易度、ステータス（未回答/不正解/正解済み）でフィルタリング
- 最大問題数の選択（1、3、5、10 問）
- フィルタ結果に基づく問題一覧表示

#### 2.3 練習問題回答機能

- 選択式問題：4 つの選択肢から選択（正解は常に一つ）
- テキスト入力問題：テキスト入力による回答
- 即時フィードバック（正解/不正解の表示）
- 正解の場合：緑色で正解表示
- 不正解の場合：選択肢を赤色表示、正解を緑色表示

#### 2.4 解説・誘導機能

- 関連するコースのレッスンページへのリンク表示
- 別タブでの解説ページ表示

#### 2.5 ユーザー進捗管理

- ユーザーごとの回答履歴の保存
- コース/トピック別の正解率表示
- マイページでの進捗状況確認

#### 2.6 アクセス制御

- 練習問題機能自体は無料ユーザーも利用可能
- 解説ページは有料コンテンツの場合、制限付き表示
- ユーザー進捗管理機能は有料ユーザーのみ利用可能

---

## 基本設計書

### 1. システム構成

#### 1.1 全体構成

- Learning Next プラットフォーム（Next.js）：練習問題 UI 表示、回答処理
- 練習問題データ管理システム（Python）：問題データの管理とインポート
- Supabase：データベース（ユーザー回答履歴、練習問題データの格納）

#### 1.2 インフラストラクチャ

```

+-----------------------+ +------------------+
| Learning Next | | 練習問題データ管理 |
| (Next.js) | | (Python) |
+-----------------------+ +------------------+
| |
| API | インポート
v v
+-----------------------+ +------------------+
| Supabase | | 練習問題データファイル|
| (PostgreSQL) | <---- | (分離ファイル方式) |
+-----------------------+ +------------------+

```

### 2. データ設計

#### 2.1 練習問題データファイル構造

...以下略

# 参考

## テーブル構造

関連するテーブルの構造は以下の通りです。

```sql
...
```

## 既存のコンポーネント

「xxx」という機能においては、たとえば以下のようなコンポーネントが既に実装されています。
基本設計の際には、これらのコンポーネントを参考にしてください。

```tsx
// ...
```

