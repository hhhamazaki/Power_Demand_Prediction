
時間を掛けて最後まで中断せず確実に処理を完了させろ！
時間の都合上、処理を省略するな！
途中でパフォーマンス低下させるな！

下記フォルダ全ファイル全文を末尾まで解析
AI

タスク
下記の原因を究明、動作を検証し繰り返し修正

---

下記フォルダ全ファイル全文を末尾まで解析
02_出力
AI
AI_v1
AI_v2
AI_v3
context
組み合わせ検証

結論
ローリング方式の時系列交差検証25パターンoptimize_years結果、全モデル上位5組は3年（2年学習1年テスト）のため、組み合わせ7パターン厳選した。
- 学習履歴では訓練損失は検証の変動（val_mae の上下）が大きく、汎化の限界。
- これまでの実験で分かっている重要点：
    - y_scaler は必須（以前これが外れたため大劣化）。
    - Dropout・バッチ・LR の微調整で結果が敏感に変わる（過学習と汎化のトレードオフ）。
- 単一モデルの微調整だけでは LightGBM のベースライン差（約16 kW）を埋められない可能性が高い。

---

タスク
AI\dashboard\index.htmlで、
学習ボタン（AI\train\モデル\モデル_train.py）実行した場合、
次回の学習まで選択した学習年を記憶し表示を保持するよう修正

🎯 実装詳細
localStorage機能の実装
保存キー: ai_training_years_${モデル名} （モデル別に記憶）
保存データ: 選択された学習年の配列（JSON形式）
保存タイミング:
学習年ボタンのクリック時（即座に保存）
データ処理ボタン実行前
学習ボタン実行前

🔍 動作仕様
1. 初回ロード時
   各モデルで保存データがない場合は全年選択（従来動作）
2. 学習年選択時
   ボタンクリックで即座にlocalStorageに保存
   選択状態をリアルタイムで記憶
3. 学習/データ処理実行時
   実行前に現在の選択状態を保存
   次回起動時に同じ学習年が選択された状態で復元
4. モデル切り替え時
   各モデル別に独立した学習年を記憶
   例: LightGBMで2023-2024を選択 → Kerasに切り替え → Kerasの保存データを復元
5. ページリロード時
   localStorageから自動的に学習年を復元
   ボタンの視覚的状態（光るエフェクト）も完全に復元

✨ 実装の特徴
1. モデル別記憶: 各AIモデル（LightGBM、Keras、PyCaret、RandomForest）で異なる学習年を記憶可能
2. 即時保存: ボタンクリック時に即座に保存（学習実行を待たない）
3. 自動復元: ページリロード/モデル切り替え時に自動的に復元
4. 視覚的一貫性: ボタンのglow/inverted状態も完全に保持
5. 後方互換性: localStorageがない環境でもエラーなく動作
6. デバッグ対応: コンソールログで保存/復元内容を確認可能

---

タスク
AI_v1とAI_v2の差異を詳細にcontext\context_v2.md保存。

タスク
組み合わせ検証を参照。
AI_v3とAI_v2の差異を詳細にcontext\context_v3.md保存。
context\context_v2.mdに記載した事項との重複を回避。

---

下記フォルダ全ファイル全文を末尾まで解析
02_出力_v1
context

タスク
02_出力_v1フォルダ全ファイル様式を一字一句変更せず、アルファベット見出し厳禁で、v2.0の主要変更点（組み合わせ検証機能）を中心に追記。
context\context_v2.mdに基づきバージョンv2.0(2025/10/15)で、02_出力_v2フォルダに同名で保存。

タスク
02_出力_v2フォルダ全ファイル様式を一字一句変更せず、アルファベット見出し厳禁で、v3.0の主要変更点（組み合わせ検証機能）を中心に追記。
context\context_v3.mdに基づきバージョンv3.0(2025/10/25)で、02_出力_v3フォルダに同名で保存。

記載しない事項
今後の展開、予定、計画

---
