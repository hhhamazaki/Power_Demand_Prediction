
電力需要予測AIモデル - 年組み合わせ最適化

学習年組み合わせ最適化を開始します...
利用可能年: 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024
検証組み合わせ数: 25

学習年組み合わせ検証を実行中...
[ 1/25] 2016,2017→2018: 成功 (RMSE: 152.6)
[ 2/25] 2017,2018→2019: 成功 (RMSE: 165.8)
[ 3/25] 2018,2019→2020: 成功 (RMSE: 195.4)
[ 4/25] 2019,2020→2021: 成功 (RMSE: 167.1)
[ 5/25] 2020,2021→2022: 成功 (RMSE: 171.4)
[ 6/25] 2021,2022→2023: 成功 (RMSE: 165.7)
[ 7/25] 2022,2023→2024: 成功 (RMSE: 165.6)
[ 8/25] 2016,2017,2018→2019: 成功 (RMSE: 169.4)
[ 9/25] 2017,2018,2019→2020: 成功 (RMSE: 207.5)
[10/25] 2018,2019,2020→2021: 成功 (RMSE: 182.7)
[11/25] 2019,2020,2021→2022: 成功 (RMSE: 177.1)
[12/25] 2020,2021,2022→2023: 成功 (RMSE: 191.0)
[13/25] 2021,2022,2023→2024: 成功 (RMSE: 192.5)
[14/25] 2016,2017,2018,2019→2020: 成功 (RMSE: 203.0)
[15/25] 2017,2018,2019,2020→2021: 成功 (RMSE: 180.5)
[16/25] 2018,2019,2020,2021→2022: 成功 (RMSE: 184.9)
[17/25] 2019,2020,2021,2022→2023: 成功 (RMSE: 194.0)
[18/25] 2020,2021,2022,2023→2024: 成功 (RMSE: 188.1)
[19/25] 2016,2017,2018,2019,2020→2021: 成功 (RMSE: 171.0)
[20/25] 2017,2018,2019,2020,2021→2022: 成功 (RMSE: 179.3)
[21/25] 2018,2019,2020,2021,2022→2023: 成功 (RMSE: 197.9)
[22/25] 2019,2020,2021,2022,2023→2024: 成功 (RMSE: 178.9)
[23/25] 2016,2017,2018,2019,2020,2021→2022: 成功 (RMSE: 186.0)
[24/25] 2017,2018,2019,2020,2021,2022→2023: 成功 (RMSE: 208.0)
[25/25] 2018,2019,2020,2021,2022,2023→2024: 成功 (RMSE: 185.2)
結果を year_optimization_results.json に保存しました

---
学習年組み合わせ最適化結果

総実行回数: 25
成功回数: 25

【上位5組み合わせ（RMSE基準）】

1位: 学習年 2016,2017 → テスト年 2018
   RMSE: 152.582 kW
   R²: 0.9120
   MAE: 100.423 kW
   実行時間: 14.2秒

2位: 学習年 2022,2023 → テスト年 2024
   RMSE: 165.619 kW
   R²: 0.9193
   MAE: 107.717 kW
   実行時間: 11.5秒

3位: 学習年 2021,2022 → テスト年 2023
   RMSE: 165.688 kW
   R²: 0.9166
   MAE: 126.659 kW
   実行時間: 11.0秒

4位: 学習年 2017,2018 → テスト年 2019
   RMSE: 165.760 kW
   R²: 0.9056
   MAE: 104.582 kW
   実行時間: 15.1秒

5位: 学習年 2019,2020 → テスト年 2021
   RMSE: 167.059 kW
   R²: 0.9069
   MAE: 109.749 kW
   実行時間: 10.9秒

【統計情報】
RMSE - 平均: 182.419, 標準偏差: 14.033
RMSE - 最小: 152.582, 最大: 207.953
R² - 平均: 0.9229, 標準偏差: 0.0144

🏆 【最優秀組み合わせ】
学習年: 2016,2017
テスト年: 2018
RMSE: 152.582 kW, R²: 0.9120, MAE: 100.423 kW

---

🎯 2025年電力需要予測 - 最適学習年組み合わせ推奨

【2025年予測推奨学習年組み合わせ】

1位: 学習年 2022,2023,2024 → テスト年 2025
     推奨: 最新3年データによる学習（トレンド重視）
     RMSE: 165-175 kW（推定）

2位: 学習年 2023,2024 → テスト年 2025
     代替案: 最新2年データによる学習（最新トレンド重視）
     RMSE: 165-180 kW（推定）

3位: 学習年 2021,2022,2023,2024 → テスト年 2025
     代替案: 最新4年データによる学習（安定性重視）
     RMSE: 170-190 kW（推定）

【実験結果による近似組み合わせ】
1. 学習年 2022,2023 → テスト年 2024
   実験RMSE: 165.6 kW, R²: 0.9193

2. 学習年 2021,2022 → テスト年 2023
   実験RMSE: 165.7 kW, R²: 0.9166

3. 学習年 2020,2021 → テスト年 2022
   実験RMSE: 171.4 kW, R²: 0.8993

📋 Tomorrow予測実行推奨コマンド:
set AI_TARGET_YEARS=2022,2023,2024,2025
または
$env:AI_TARGET_YEARS="2022,2023,2024,2025"

各モデルのtomorrow予測に適用:
- tomorrow/Keras/Keras_tomorrow.py
- tomorrow/LightGBM/LightGBM_tomorrow.py
- tomorrow/Pycaret/Pycaret_tomorrow.py
- tomorrow/RandomForest/RandomForest_tomorrow.py

学習年組み合わせ最適化が完了しました

---

### **全モデル最適化結果:**

|モデル|最優秀組み合わせ|RMSE|R²|成功率|
|---|---|---|---|---|
|**LightGBM**|2016,2017→2018|**152.6 kW**|0.9120|25/25 (100%)|
|**Pycaret**|2016,2017→2018|**157.4 kW**|0.9064|25/25 (100%)|
|**Keras**|2016,2017→2018|**159.6 kW**|0.9038|25/25 (100%)|
|**RandomForest**|2016,2017→2018|**171.3 kW**|0.8892|25/25 (100%)|

### **🏆 総合結果:**

- **最優秀モデル:** LightGBM (RMSE: 152.6 kW)
- **最適学習年:** 2016, 2017
- **テスト年:** 2018
- **全モデル共通:** 同じ組み合わせが最優秀!

### **保存ファイル:**

✅ [2025-10-19_LightGBM_optimize_years.txt](vscode-file://vscode-app/c:/Users/h-ham/AppData/Local/Programs/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)  
✅ [2025-10-19_Pycaret_optimize_years.txt](vscode-file://vscode-app/c:/Users/h-ham/AppData/Local/Programs/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)  
✅ [2025-10-19_Keras_optimize_years.txt](vscode-file://vscode-app/c:/Users/h-ham/AppData/Local/Programs/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)  
✅ [2025-10-19_RandomForest_optimize_years.txt](vscode-file://vscode-app/c:/Users/h-ham/AppData/Local/Programs/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)

### **処理時間分析:**

- **LightGBM:** 最速 (平均 12-15秒/組合せ)
- **RandomForest:** 速い (平均 14-17秒/組合せ)
- **Pycaret:** 中速 (平均 27-32秒/組合せ)
- **Keras:** 最遅 (平均 86-203秒/組合せ) ← **ディープラーニングの特性**

---

# 結論

ローリング方式の時系列交差検証25パターンoptimize_years結果、全モデル上位5組は3年（2年学習1年テスト）のため、組み合わせ7パターン厳選した。